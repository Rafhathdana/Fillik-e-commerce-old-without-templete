<%- include('../header1') -%>
<head>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
    integrity="sha512-REJWlDv43PYYt0s46t7p45o0HfVJ1PY9XEM0g7z0KcE1fQG6aYItpo7W1Q8vJfcOD/pPq3TQLHUzWtK8rxvJsg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    integrity="sha512-V3J/4/tlL+GvZqtUVSFFK+pOZyt+1WssQv0aTi4K3b4Jh4P89eu0Z7zmL1peQ2KjzKeU5HH5U5Fr6hXO+sUcsg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.min.js"
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <style>
    .wrap-header-cart {
      position: fixed;
      top: 0;
      right: -100%;
      width: 400px; /* adjust the width as needed */
      height: 100%;
      background-color: white;
      z-index: 9999;
      transition: right 0.3s ease-in-out;
    }

    .show-header-cart {
      right: 0;
    }
    /* Hide the cart element by default */
    .cart {
      display: none;
    }

    /* Show the cart element when the 'show' class is added */
    .cart.show {
      display: block;
    }
  </style>
</head>
<%- include('sidecart') -%>
<div class="flex">
  <form>
    <main class="d-flex flex-nowrap position-fixed" style="height: 100%">
      <div
        class="d-flex flex-column flex-shrink-0 p-3 rafhathsinglecolour"
        style="width: 180px; margin-top: 63px"
      >
        <ul class="nav nav-pills flex-column mb-auto">
          <li>
            <div class="filter-item">
              <h6 for="name-input">Price</h6>
              <div class="flex mt-1">
                <label for="min-input">min: </label>
                <input type="text" id="min-input" class="price-input" />
              </div>
              <div class="flex mt-2">
                <label for="max-input">max:</label
                ><input type="text" id="max-input" class="price-input" />
              </div>
            </div>
          </li>
          <li>
            <div class="filter-item">
              <h6 for="genderType" class="mt-3">category:</h6>
              <select name="category" id="category" class="gendercategory">
                <option class="visually-hidden" value="">
                  select category
                </option>
                <% for (let i = 0; i < category.length; i++) { %>
                <option class="selectoption" value="<%= category[i].values %>">
                  <%= category[i].values %>
                </option>
                <% } %>
              </select>
            </div>
          </li>
          <li>
            <div class="filter-item">
              <h6 for="genderType" class="mt-3">genderType:</h6>
              <select name="genderType" id="genderType" class="gendercategory">
                <% for (let i = 0; i < genderType.length; i++) { %>
                <option
                  class="selectoption"
                  value="<%= genderType[i].values %>"
                >
                  <%= genderType[i].values %>
                </option>
                <% } %>
              </select>
            </div>
          </li>
          <li>
            <div class="filter-item">
              <h6 class="mt-3" for="colour">colour:</h6>
              <select name="colour" id="colour" class="gendercategory">
                <% for (let i = 0; i < colour.length; i++) { %>
                <option class="selectoption" value="<%= colour[i].values %>">
                  <%= colour[i].values %>
                </option>
                <% } %>
              </select>
            </div>
          </li>
          <li>
            <div class="filter-item">
              <h6 class="mt-3" for="pattern">pattern:</h6>
              <select name="pattern" id="pattern" class="gendercategory">
                <% for (let i = 0; i < pattern.length; i++) { %>
                <option class="selectoption" value="<%= pattern[i].values %>">
                  <%= pattern[i].values %>
                </option>
                <% } %>
              </select>
            </div>
          </li>
          <li>
            <div class="filter-item">
              <h6 class="mt-3" for="sizes">sizes:</h6>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="S"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Small
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="M"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  medium
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="L"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Large
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="XL"
                  id="flexCheckDefault"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Extra Large
                </label>
              </div>
            </div>
          </li>
          <li>
            <button class="btn btn-outline-light mt-4 mx-4">Apply</button>
          </li>
        </ul>
        <hr />
      </div>
    </main>
  </form>

  <div
    class="container mt-5 mt-md-0"
    style="padding-top: 100px; margin-left: 190px"
  >
    <div class="row g-4">
      <% for (let i = locals.startIndex; i < locals.endIndex; i++) { %>
      <div class="col-md-3 col-sm-6">
        <div class="product-grid">
          <div class="product-image">
            <a href="/productview/<%=productsList[i]._id %>" class="image">
              <img src="/images/<%=productsList[i].images[0]%>" />
            </a>
            <% let value = parseInt(productsList[i].orginalPrice) -
            parseInt(productsList[i].ourPrice/100); let discount = (value /
            parseInt(productsList[i].orginalPrice)) * 100; %>
            <span class="product-discount-label"
              >-<%= discount.toFixed(0) %>%</span
            >
            <ul class="product-links">
              <li>
                <a href="#"><i class="fa fa-search"></i></a>
              </li>
              <li>
                <a href="#"><i class="fa fa-heart"></i></a>
              </li>
              <li>
                <a
                  href="#"
                  onclick="navigator.share({ title: '<%= locals.productsList[i].name %>', url: 'https://localhost:3000/productview/<%=productsList[i]._id %>' })"
                  ><i class="fa fa-random"></i
                ></a>
              </li>
            </ul>
            <a href="" class="add-to-cart">Add to Cart</a>
          </div>
          <div class="product-content">
            <h3 class="title">
              <a href="#"><%= locals.productsList[i].name %></a>
            </h3>
            <div class="price">
              RS.<%=((productsList[i].ourPrice)/100)%>
              <span>Rs<%= productsList[i].orginalPrice %></span>
            </div>
          </div>
        </div>
      </div>
      <% } %>
    </div>
  </div>
</div>
<script>
  const cartIcon = document.querySelector(".cart-icon");
  const cartContainer = document.querySelector(".wrap-header-cart");

  cartIcon.addEventListener("click", () => {
    cartContainer.classList.toggle("show-header-cart");
  });
</script>
